#!/usr/bin/env perl

use Modern::Perl;
use Mojolicious::Lite;

get '/:after5page' => [after5page => qr/\w*/] => sub {

    my $self = shift;

    given ($self->param('after5page')) {

        ## /live
        when ('live') {
            $self->render('live', layout => 'default');
        }

        ## /work
        when ('work') {
            $self->render('work', layout => 'default');
        }

        ## /play
        when ('play') {
            $self->render('play', layout => 'default');
        }

        ## /photos
        when ('photos') {
            $self->render('photos', layout => 'default');
        }

        default {
            $self->render('index', layout => 'default');
        }

    }

} => 'after5page';


post '/:after5form' => [after5form => qr/\w+/] => sub {

    my $self = shift;

    given ($self->param('after5form')) {

        default {
            $self->redirect_to('after5page');
        }

    }

} => 'after5form';

app->secret('after5detroit.com');
app->start;
